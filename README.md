# ADFæ£€éªŒMCPå·¥å…·

ä½œè€…ï¼šåºåŠ›é“–

é‚®ç®±ï¼š3522236586@qq.com

GitHub:

## ğŸ“Š é¡¹ç›®ç®€ä»‹

ADFæ£€éªŒMCPå·¥å…·æ˜¯ä¸€ä¸ªåŸºäºFastMCPæ¡†æ¶çš„æ—¶é—´åºåˆ—å¹³ç¨³æ€§æ£€éªŒå·¥å…·ï¼Œä½¿ç”¨ç»å…¸çš„ç»Ÿè®¡å­¦æ–¹æ³•è¿›è¡Œå¼‚å¸¸æ£€æµ‹ã€‚è¯¥å·¥å…·æ— éœ€è®­ç»ƒæ•°æ®ï¼Œå¯ä»¥ç›´æ¥å¯¹ä»»æ„é•¿åº¦çš„æ—¶é—´åºåˆ—æ•°æ®è¿›è¡Œå³æ—¶æ£€æµ‹ã€‚

## ğŸ” æ£€æµ‹èƒ½åŠ›

### æ”¯æŒçš„æ•°æ®ç±»å‹

1. **æ—¥å¿—æ•°æ®**

   - OpenSSHæ—¥å¿—
   - ç³»ç»Ÿæ—¥å¿—
   - åº”ç”¨ç¨‹åºæ—¥å¿—
   - WebæœåŠ¡å™¨æ—¥å¿—
2. **æ—¶é—´åºåˆ—æ•°æ®**

   - é‡‘èæ•°æ®ï¼ˆè‚¡ä»·ã€æ±‡ç‡ç­‰ï¼‰
   - ä¼ æ„Ÿå™¨æ•°æ®ï¼ˆæ¸©åº¦ã€å‹åŠ›ã€æµé‡ç­‰ï¼‰
   - ç½‘ç»œæµé‡æ•°æ®
   - ç”¨æˆ·è¡Œä¸ºæ•°æ®
3. **ä¸šåŠ¡æ•°æ®**

   - é”€å”®æ•°æ®
   - ç”¨æˆ·æ´»è·ƒåº¦æ•°æ®
   - æœåŠ¡å™¨æ€§èƒ½æŒ‡æ ‡
   - è®¾å¤‡è¿è¡ŒçŠ¶æ€æ•°æ®

### æ£€æµ‹çš„å¼‚å¸¸ç±»å‹

- **è¶‹åŠ¿å¼‚å¸¸**ï¼šæ£€æµ‹æ•°æ®æ˜¯å¦å­˜åœ¨å¼‚å¸¸è¶‹åŠ¿
- **å¹³ç¨³æ€§å¼‚å¸¸**ï¼šåˆ¤æ–­æ—¶é—´åºåˆ—æ˜¯å¦å¹³ç¨³
- **å‘¨æœŸæ€§å¼‚å¸¸**ï¼šè¯†åˆ«å¼‚å¸¸çš„å‘¨æœŸæ€§æ¨¡å¼
- **çªå˜å¼‚å¸¸**ï¼šæ£€æµ‹æ•°æ®çš„çªç„¶å˜åŒ–

### ç¯å¢ƒè¦æ±‚

- **Pythonç‰ˆæœ¬**ï¼š3.8+
- **æ“ä½œç³»ç»Ÿ**ï¼šWindows/Linux/macOS
- **å†…å­˜è¦æ±‚**ï¼šè‡³å°‘2GB RAM
- **å­˜å‚¨ç©ºé—´**ï¼šè‡³å°‘100MBå¯ç”¨ç©ºé—´

### ä¾èµ–åŒ…

```bash
fastmcp>=2.12.0      # FastMCPæ¡†æ¶
numpy>=1.21.0        # æ•°å€¼è®¡ç®—
pandas>=1.3.0        # æ•°æ®å¤„ç†
scipy>=1.7.0         # ç§‘å­¦è®¡ç®—
statsmodels>=0.13.0  # ç»Ÿè®¡æ¨¡å‹
```

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**

   ```bash
   git clone <repository-url>
   cd adf-master
   ```
2. **å®‰è£…ä¾èµ–**

   ```bash
   pip install -r requirements.txt
   ```
3. **å¯åŠ¨æœåŠ¡**

   ```bash
   python adf_mcp_server.py
   ```

## ğŸ”§ æœåŠ¡é…ç½®

### æœåŠ¡ç«¯å£

- **é»˜è®¤ç«¯å£**ï¼š2230
- **æœåŠ¡åœ°å€**ï¼šhttp://127.0.0.1:2230/sse
- **ä¼ è¾“åè®®**ï¼šSSE (Server-Sent Events)

### å¯åŠ¨æœåŠ¡

```bash
# ä½¿ç”¨é»˜è®¤ç«¯å£2230å¯åŠ¨
python adf_mcp_server.py

# æœåŠ¡å¯åŠ¨åä¼šæ˜¾ç¤ºï¼š
# ğŸ–¥ï¸  Server name:     adf-mcp
# ğŸ“¦ Transport:       SSE
# ğŸ”— Server URL:      http://127.0.0.1:2230/sse
# ğŸï¸  FastMCP version: 2.12.2
```

### æœåŠ¡çŠ¶æ€æ£€æŸ¥

```bash
# æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨
netstat -an | findstr :2230

# åœæ­¢æœåŠ¡ï¼ˆå¦‚æœéœ€è¦ï¼‰
# åœ¨æœåŠ¡è¿è¡Œçš„ç»ˆç«¯æŒ‰ Ctrl+C
```

## ğŸ› ï¸ æ ¸å¿ƒåŠŸèƒ½

### 1. ç›´æ¥æ£€æµ‹åŠŸèƒ½

- **å•ä¸ªåºåˆ—æ£€æµ‹**ï¼šå¯¹å•ä¸ªæ—¶é—´åºåˆ—è¿›è¡ŒADFæ£€éªŒ
- **æ‰¹é‡æ£€æµ‹**ï¼šåŒæ—¶æ£€æµ‹å¤šä¸ªæ—¶é—´åºåˆ—
- **æ–‡ä»¶åˆ†æ**ï¼šç›´æ¥åˆ†æCSV/TXTæ–‡ä»¶
- **ç»“æœè§£é‡Š**ï¼šæä¾›è¯¦ç»†çš„ç»Ÿè®¡ç»“æœè§£é‡Š

### 2. æ”¯æŒçš„æ–‡ä»¶æ ¼å¼

- **CSVæ–‡ä»¶**ï¼šæ”¯æŒé€—å·åˆ†éš”å€¼æ ¼å¼
- **TXTæ–‡ä»¶**ï¼šæ”¯æŒè‡ªå®šä¹‰åˆ†éš”ç¬¦çš„æ–‡æœ¬æ–‡ä»¶
- **æ•°æ®è¦æ±‚**ï¼šè‡³å°‘åŒ…å«10ä¸ªæ•°æ®ç‚¹

### 3. æ£€æµ‹å‚æ•°

- **å›å½’ç±»å‹**ï¼šæ— å¸¸æ•°é¡¹(n)ã€æœ‰å¸¸æ•°é¡¹(c)ã€æœ‰å¸¸æ•°é¡¹å’Œè¶‹åŠ¿é¡¹(ct)
- **æ»åé€‰æ‹©**ï¼šAICå‡†åˆ™ã€BICå‡†åˆ™ã€tç»Ÿè®¡é‡
- **æ˜¾è‘—æ€§æ°´å¹³**ï¼š1%ã€5%ã€10%

## ä½¿ç”¨æ–¹æ³•

### 1. åŸºç¡€æ£€æµ‹

```python
from adf_mcp.adf_core import ADFTester
import numpy as np

# åˆ›å»ºæ£€éªŒå™¨
tester = ADFTester()

# å‡†å¤‡æ•°æ®
data = np.random.normal(0, 1, 100).tolist()

# æ‰§è¡Œæ£€æµ‹
result = tester.test_stationarity(data)
print(f"æ˜¯å¦å¹³ç¨³: {result['is_stationary']}")
print(f"på€¼: {result['p_value']:.6f}")
```

### 2. æ–‡ä»¶åˆ†æ

```python
import requests

# åˆ†æCSVæ–‡ä»¶
response = requests.post("http://localhost:2230/tools/adf_analyze_file", json={
    "csv": "path/to/your/data.csv",
    "analysis_type": "log_analysis"
})

print(response.json())
```

### 3. æ‰¹é‡æ£€æµ‹

```python
# æ‰¹é‡æ£€æµ‹å¤šä¸ªåºåˆ—
data_dict = {
    "åºåˆ—1": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
    "åºåˆ—2": [2, 4, 6, 8, 10, 12, 14, 16, 18, 20],
    "åºåˆ—3": [1, 1, 2, 3, 5, 8, 13, 21, 34, 55]
}

response = requests.post("http://localhost:2230/tools/adf_batch_test", json={
    "data_dict": data_dict,
    "regression": "c",
    "max_lags": 5
})
```

## ğŸ¯ AIè°ƒç”¨ç¤ºä¾‹

### è‡ªç„¶è¯­è¨€è¯·æ±‚

> "è¯·å¸®æˆ‘åˆ†æOpenSSHæ—¥å¿—æ•°æ®ï¼Œæ£€æµ‹æ—¥å¿—æ´»åŠ¨çš„æ—¶é—´åºåˆ—å¹³ç¨³æ€§"

### AIè‡ªåŠ¨è°ƒç”¨

AIä¼šè‡ªåŠ¨è¯†åˆ«æ‚¨çš„è¯·æ±‚å¹¶è°ƒç”¨ç›¸åº”çš„MCPå·¥å…·ï¼š

```json
{
  "tool": "adf_analyze_file",
  "parameters": {
    "csv": "E:\\software\\MCP__Proj\\100MCP\\adf-master\\OpenSSH_2k.log_structured.csv",
    "analysis_type": "log_analysis",
    "regression": "c",
    "max_lags": 10,
    "lags_method": "aic"
  }
}
```

## ğŸ“Š è¾“å‡ºç»“æœ

### æ£€æµ‹ç»“æœæ ¼å¼

```json
{
  "status": "success",
  "analysis_type": "log_analysis",
  "file_path": "data.csv",
  "data_summary": {
    "time_series_length": 250,
    "value_range": {
      "min": 0,
      "max": 15,
      "mean": 8.0,
      "std": 3.2
    }
  },
  "adf_result": {
    "statistic": -2.345678,
    "p_value": 0.123456,
    "is_stationary": false,
    "lags_used": 5,
    "regression_description": "å¸¸æ•°é¡¹",
    "lags_method_description": "AICå‡†åˆ™"
  },
  "interpretation": "åœ¨5%æ˜¾è‘—æ€§æ°´å¹³ä¸‹ï¼Œæ—¶é—´åºåˆ—æ˜¯éå¹³ç¨³çš„...",
  "recommendations": [
    "æ—¶é—´åºåˆ—æ˜¯éå¹³ç¨³çš„ï¼Œå»ºè®®è¿›è¡Œå·®åˆ†å¤„ç†",
    "å¯ä»¥è€ƒè™‘ä½¿ç”¨ARIMAæ¨¡å‹è¿›è¡Œå»ºæ¨¡"
  ]
}
```

### ç»“æœè§£é‡Š

- **is_stationary**: trueè¡¨ç¤ºå¹³ç¨³ï¼Œfalseè¡¨ç¤ºéå¹³ç¨³
- **p_value**: på€¼å°äº0.05è¡¨ç¤ºå¹³ç¨³ï¼Œå¤§äºç­‰äº0.05è¡¨ç¤ºéå¹³ç¨³
- **statistic**: ADFç»Ÿè®¡é‡ï¼Œç»å¯¹å€¼è¶Šå¤§è¶Šå€¾å‘äºå¹³ç¨³
- **recommendations**: åŸºäºç»“æœçš„åˆ†æå»ºè®®

## ğŸ”§ æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒç»„ä»¶

- **ADFTester**: ADFæ£€éªŒæ ¸å¿ƒç®—æ³•å®ç°
- **FastMCP**: å¼‚æ­¥ä»»åŠ¡å¤„ç†æ¡†æ¶
- **statsmodels**: ç»Ÿè®¡æ¨¡å‹è®¡ç®—å¼•æ“
- **pandas**: æ•°æ®å¤„ç†å’Œæ–‡ä»¶è¯»å–

### å¤„ç†æµç¨‹

1. **æ•°æ®è¾“å…¥**ï¼šæ¥æ”¶æ–‡ä»¶è·¯å¾„æˆ–æ•°æ®æ•°ç»„
2. **æ•°æ®é¢„å¤„ç†**ï¼šæ¸…æ´—å’ŒéªŒè¯æ•°æ®
3. **ADFæ£€éªŒ**ï¼šæ‰§è¡Œç»Ÿè®¡æ£€éªŒ
4. **ç»“æœåˆ†æ**ï¼šç”Ÿæˆç»Ÿè®¡ç»“æœå’Œå»ºè®®
5. **ç»“æœè¾“å‡º**ï¼šè¿”å›è¯¦ç»†çš„åˆ†ææŠ¥å‘Š

### 1. æ— éœ€è®­ç»ƒ

- åŸºäºç»å…¸ç»Ÿè®¡å­¦ç†è®º
- æ— éœ€è®­ç»ƒæ•°æ®
- å³æ—¶æ£€æµ‹ç»“æœ

### 2. é«˜æ€§èƒ½

- æ£€æµ‹æ—¶é—´ï¼š1-3æ¯«ç§’
- æ”¯æŒå¤§æ–‡ä»¶å¤„ç†
- å¼‚æ­¥ä»»åŠ¡å¤„ç†

### 3. æ˜“ç”¨æ€§

- è‡ªç„¶è¯­è¨€è°ƒç”¨
- è¯¦ç»†çš„ç»“æœè§£é‡Š
- å®Œæ•´çš„é”™è¯¯å¤„ç†

### 4. æ‰©å±•æ€§

- æ¨¡å—åŒ–è®¾è®¡
- æ˜“äºæ·»åŠ æ–°åŠŸèƒ½
- æ”¯æŒå¤šç§æ•°æ®æ ¼å¼
